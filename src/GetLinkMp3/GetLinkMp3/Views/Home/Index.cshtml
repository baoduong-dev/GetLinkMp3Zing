@{
    ViewBag.Title = "Home Page";
}
@{
    AjaxOptions GetLinkOption = new AjaxOptions()
    {
        OnBegin = "ShowModal",
        OnComplete = "CloseModal",
        UpdateTargetId = "show-download",
        OnFailure = "FailureMessage",
        HttpMethod = "get"
    };
}
<div class="section no-pad-bot" id="index-banner">
    <div class="container">
        <br><br>
        <h1 class="header center orange-text">Download nhạc 320kbps mp3 zing</h1>
        <div class="row center">
            <h5 class="header col s12 light">Website giúp bạn có thể download được nhạc 320kbps của mp3 zing mà không cần có nick vip.</h5>
            <h5 class="header col s12 light">Lưu ý: Nên cài đặt IDM trước khi tải nhạc.</h5>
        </div>
    </div>
</div>

<div class="container">
    <div class="section">
        <!--   Icon Section   -->
        <div class="row">
            <div class="col s12 m6 offset-m3">
                <div class="row">
                    <div class="input-field col s12">
                        <div class="row">
                            @using (Ajax.BeginForm("GetLink", "Home", null, GetLinkOption, new { @class = "col s12", id = "formget" }))
                            {
                                <div class="row">
                                    <input type="text" id="url" name="url" class="validate">
                                    <label for="url">Chỉ cần copy link bài hát vào đây:</label>
                                </div>
                                <div class="row center">
                                    <button class="btn waves-effect waves-light light-blue lighten-1" type="submit" id="download">
                                        Download bài hát
                                        <i class="material-icons left">get_app</i>
                                    </button>
                                </div>

                                <div class="row">
                                    <p class="help-block"><strong>Ví dụ:</strong> http://mp3.zing.vn/bai-hat/Tam-Su-Voi-Nguoi-La-Tien-Cookie/ZW7O6UDW.html</p>
                                </div>
                            }
                        </div>
                        <div class="row">
                            <div id="show-download">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br><br>
</div>

<div id="loader" class="modal">
    <div class="modal-content">
        <h5 class="center">Đang tải! Vui lòng đợi...</h5>
        <div class="progress">
            <div class="indeterminate"></div>
        </div>
    </div>
</div>
@*<div id="loader" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="progress">
                    <div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        <span class="sr-only">Đang tải bài hát, vui lòng đợi</span>
                    </div>
                </div>
                <h4 class="text-center">Đang tải bài hát, vui lòng đợi</h4>
            </div>
        </div>
    </div>
</div>*@
@section scripts{
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script>
        $(document).ready(function () {
            if ($()) {

            }
        });

        //function getlink() {
        //    var id = $("#txtlink").val();
        //    id = id.substring(id.lastIndexOf("/") + 1, id.indexOf(".html"));
        //    var myurl = 'http://api.mp3.zing.vn/api/mobile/song/getsonginfo?requestdata={"id":"' + id + '"}';
        //    $.getJSON(myurl + '&callback=?', function (data) {
        //        //alert(data.song_id);
        //        console.log(data);
        //    });

        //}

        function ShowModal() {
            $('#loader').openModal({
                dismissible: false
            });
        }

        function CloseModal() {
            $('#loader').closeModal();
        }


    </script>
}